# Запуск

Для запуска требуется запущенная БД postgres. Для этого в docker поднимаем БД с помощью

```docker run --name otp-service -e POSTGRES_USER=postgres -e POSTGRES_PASSWORD=postgres -e POSTGRES_DB=otp -p 5432:5432 -d postgres:latest```

# Требования

**БД**

Пользователи (хранит логин пользователя, его пароль в зашифрованном виде, а также его роль).
Конфигурация OTP-кода (количество записей в ней никогда не должно превышать 1).
Таблица OTP-кодов (может содержать идентификатор операции в привязке к OTP-коду, но также допускается вынести логику работы с операциями в отдельную таблицу).

**API**

Для регистрации и аутентификации пользователей необходимо реализовать соответствующее API, которое должно минимально выполнять следующие операции:

**Регистрация нового пользователя.**

У пользователей может быть две роли: либо администратор, либо простой пользователь. Если администратор уже существует, то регистрация второго администратора должна быть невозможной.
Логин зарегистрированного пользователя.
Данная операция должна возвращать токен с ограниченным сроком действия для осуществления аутентификации и авторизации пользователя.


**Требования к каналам рассылки сгенерированных кодов**

Пользователи смогут получать защитные коды через различные каналы, что обеспечит гибкость и удобство в использовании сервиса. Для реализации этой функциональности необходимо учесть следующие требования:

Отправка кода по SMS — вам предстоит использовать эмулятор для отправки SMS, чтобы протестировать функционал. Это позволит имитировать процесс получения кодов без необходимости использования реальных SMS.
Отправка кода по Email — коды можно будет отправлять как на эмулятор, так и на реальные почтовые адреса. Это обеспечит пользователям возможность получать коды на удобный для них почтовый ящик.
Отправка кода через Telegram — с помощью Telegram API вы создадите бота, который будет отправлять коды пользователям. Это позволит мгновенно доставлять коды через популярное приложение для обмена сообщениями.
Сохранение кода в файл — реализуйте возможность сохранения сгенерированных кодов в файл.
Требования к структуре приложения
Приложение должно иметь три основных слоя:

**Слой API, содержащий обработчики HTTP-запросов.**

Слой API (хэндлеров или контроллеров) должен быть выполнен с помощью пакета com.sun.net.httpserver, встроенного в Java начиная с версии SE 6. Также допускается использование Spring MVC.
Слой сервисов, содержащий в себе основную бизнес-логику приложения.
Слой DAO, содержащий в себе классы, осуществляющие выполнение запросов к БД.
Остальные требования к функционалу
Необходимо реализовать механизм, который будет отмечать просроченные OTP-коды раз в определенный интервал времени и присваивать им статус EXPIRED.
Необходимо настроить логирование в приложении с помощью любой понравившейся вам библиотеки из модуля про логирование.
Приложение должно использовать систему сборки Gradle или Maven.

# Тесты